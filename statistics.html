		<script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.1/jquery.min.js"></script>
		<style>
		`
			h2
			{
				text-align: center;
				
			}

			h3
			{
				text-align: center;
				
			}

			button
			{
				width: 25%;
				height: 100px;
				position: relative;
				left: 37%;
			}
		</style>

		<script type="text/javascript">

				var dataElementsArray = [];
				var indicatorsArray = [];
				var dataElementsUsedArray = [];
				var dataElementsNotUsedArray = [];
				var indicatorsUsedArray = [];
				var indicatorsNotUsedArray = [];
				var tempIndicators = [];

				
				//counters needed
				var dataElementsNo,dataElementsUsedNo,dataElementsNotUsedNo;
				var indicatorsNo,indicatorsUsedNo,indicatorsNotUsedNo;
				var myIndex=0;


				

					

				var counter=0;
				populateArray();

				
				//getting a list of all indicators and data elements
				function populateArray()
				{
					$.get("../api/dataElements.json",function(dataElements)
						{ 
							$(dataElements.dataElements).each(function(i,data)
							{
								dataElementsArray[counter]=data.name;
								counter++;
							});
						});
					$(document).ajaxStop(function()
						{
							counter=0;

					$.get("../api/indicators.json",function(indicators)
						{	
							$(indicators.indicators).each(function(i,data)
								{
									
									indicatorsArray[counter]=data.name;
									
									counter++;
								});
						});

						//getting number of data elements and indicators
							dataElementsNo=dataElementsArray.length;
							indicatorsNo=indicatorsArray.length;
						});

					
					$(document).ajaxStop(function()
						{
							getCharts();
						});
					
				}

				
				

				//function for charts
				function getCharts()
				{
					//getting data from charts and analysing
					$.get("../api/charts.json",function(charts)
						{	
							
							tempIndicators = indicatorsArray.slice(0);

							counter=0;
							$(charts.charts).each(function(i,myCharts)
								{
									$.get(myCharts.href+".json",function(data)
										{	
											$(data.indicators).each(function(i,data)
												{
													
													
														indicatorsUsedArray[counter]=data.name;
														counter++;
														
														myIndex=tempIndicators.indexOf(data.name);
														
														
														tempIndicators.splice(myIndex,1);
														$("#chartsIndicatorsUsed").append(data.name+"<br>");
													
													
												});
											
										});
								});

						});
					
				$(document).ajaxStop(function()
				{
					$(tempIndicators).each(function(i,data)
								{
									$("#chartsIndicatorsNotUsed").append(data+"<br>");
								});

					
					var percentIndicators=(counter/indicatorsNo)*100;
					

					$("charts").append("<h4>the percentage of indicators used is "+percentIndicators+"%</h4>");
					$("charts").append("<h4>the percentage of indicators NOT used is "+(100-percentIndicators)+"%</h4>");
				});	
					

					//getReportTables();
				}


				//function for getting indicators in map views
				function getMaps()
				{
					//getting data from maps and analysing
					$.get("../api/mapViews.json",function(maps)
						{	
							var tempIndicators = [];
							tempIndicators = indicatorsArray.slice(0);

							counter=0;
							$(maps.mapViews).each(function(i,myMaps)
								{
									$.get(myMaps.href+".json",function(data)
										{
													indicatorsUsedArray[counter]=data.indicator.name;
													counter++;

												myIndex=tempIndicators.indexOf(data.indicator.name);
													tempIndicators.splice(myIndex,1);
													$("#mapViewsIndicatorsUsed").append(data.indicator.name);	
										});
								});

							$(tempIndicators).each(function(i,data)
								{
									$("#mapViewsIndicatorsNotUse").append(data);
								});
						});
					var percentIndicators=(counter/indicatorsNo)*100;
					

					$("#mapViews").append("the percentage of indicators used is "+percentIndicators+"%");
					$("#mapViews").append("the percentage of indicators NOT used is "+(100-percentIndicators)+"%");
				}


				//getting dATa elements from report tables
				function getReportTables()
				{
					//getting data from report tables and analysing

					$.get("../api/reportTables.json",function(reports)
						{	
							
							var tempIndicators = new Array();//tempIndicators is supposed to be tempDataElements
							tempIndicators = dataElementsArray;

							counter=0;
							$(reports.reportTables).each(function(i,myReports)
								{
									$.get(myReports.href+".json",function(data)
										{
											$(data.dataElements).each(function(i,data)
												{
													dataElementsUsedArray[counter]=data.name;
													counter++;

													myIndex=tempIndicators.indexOf(data.name);
													tempIndicators.splice(myIndex,1);
													$("#reportTablesElementsUsed").append(data.name);
												});	
										});
								});

							$(tempIndicators).each(function(i,data)
								{
									$("#reportTablesElementsNotUsed").append(data);
								});
						});
					var percentDataElements=(counter/dataElementsNo)*100;
					

					$("#reportTables").append("the percentage of data elements used is "+percentDataElements+"%");
					$("#reportTables").append("the percentage of data elements NOT used is "+(100-percentDataElements)+"%");

					getSections();
				}

				//getting data elements from sections
				function getSections()
				{
										//getting data from report tables and analysing

					$.get("../api/sections.json",function(sections)
						{	
							
							var tempIndicators = new Array();//tempIndicators is supposed to be tempDataElements
							tempIndicators = dataElementsArray;

							counter=0;
							$(sections.sections).each(function(i,mySections)
								{
									$.get(mySections.href+".json",function(data)
										{
											$(data.dataElements).each(function(i,data)
												{
													dataElementsUsedArray[counter]=data.name;
													counter++;

													myIndex=tempIndicators.indexOf(data.name);
													tempIndicators.splice(myIndex,1);
													$("#sectionsElementsUsed").append(data.name);
												});	
										});
								});

							$(tempIndicators).each(function(i,data)
								{
									$("#sectionsElementsNotUsed").append(data);
								});
						});
					var percentDataElements=(counter/dataElementsNo)*100;
					

					$("#sections").append("the percentage of data elements used is "+percentDataElements+"%");
					$("#sections").append("the percentage of data elements NOT used is "+(100-percentDataElements)+"%");

					getMaps();	
				}
			

				//doing lookups,analysing the dapercentDataElementstapercentDataElementsopulateArray();
				function stats() 
				{
					//populating
					populateArray();

					//get indicators in charts
					//getCharts();

					//get indicators from maps
					//getMaps();

					//get data elements from report tables
					//getReportTables();

					//get data elements from sections
					//getSections();
				}
					

					
				
		</script>

	
		<h2 style="text-align:center;">Statistical analysis of usage of indicators and data elements</h2>
		
		<button onclick="javascript:stats();">RUN</button>
		<div id="charts" style="width:100%;">
				<h3>Charts</h3>
				
				<div id="chartsIndicatorsUsed" style="float:left;"><h4>charts indicators used</h4></div>
				<div id="chartsIndicatorsNotUsed" style="float:right;"><h4>charts indicators not used</h4></div>
				<div id="chartsDataElementsUsed" style="float:right;"><h4></div>
				<div id="chartsDataElementsNotUsed" style="float:right;"></div>

		</div>
		<br>
		<div id="mapViews" style="width:100%;">
			<h3>Map Views</h3>

				<div id="mapViewsIndicatorsUsed" style="float:left;"></div>
				<div id="mapViewsIndicatorsNotUsed" style="float:left;"></div>
				<div id="mapViewsDataElementsUsed" style="float:right;"></div>
				<div id="mapViewsDataElementsNotUsed" style="float:right;"></div>

		</div>
		<br>
		<div id="reportTables" style="width:100%;">
			<h3>Reports</h3>

				<div id="reportTablesElementsUsed" style="float:right;"></div>
				<div id="reportTablesElementsNotUsed" style="float:right;"></div>	

		</div>
		<br>
		<div id="sections" style="width:100%;">
			<h3>Sections</h3>

				<div id="sectionsElementsUsed" style="float:right;"></div>
				<div id="sectionsElementsNotUsed" style="float:right;"></div>

		</div>